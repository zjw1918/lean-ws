'use strict';

var AV = require('leanengine');

AV.init({
  appId: process.env.LEANCLOUD_APP_ID,
  appKey: process.env.LEANCLOUD_APP_KEY,
  masterKey: process.env.LEANCLOUD_APP_MASTER_KEY
});

// 如果不希望使用 masterKey 权限，可以将下面一行删除
AV.Cloud.useMasterKey();

var app = require('./app');

// 端口一定要从环境变量 `LEANCLOUD_APP_PORT` 中获取。
// LeanEngine 运行时会分配端口并赋值到该变量。
var PORT = parseInt(process.env.LEANCLOUD_APP_PORT || process.env.PORT || 3000);

app.listen(PORT, function (err) {
  console.log('Node app is running on port:', PORT);

  // 注册全局未捕获异常处理器
  process.on('uncaughtException', function(err) {
    console.error('Caught exception:', err.stack);
  });
  process.on('unhandledRejection', function(reason, p) {
    console.error('Unhandled Rejection at: Promise ', p, ' reason: ', reason.stack);
  });
});

// tcp
// zvf1kAN4NexAETh/c3pSt/Ue6vXVoGdqfMbuNIuSWetedEPwGbnYMruYf2SELwHdfKx9f9MAsMoFGmUH6M03znCPEDLfkAQkvht+0u7Bh3xe1Wffa2apBi4YFpEurfyez4Vrs0eYE7zVC8nuyZml2M6m/Wwk+mWidUBikI9v3bLU3WtPBN5JGoI2ORTQAygkiYNksJx4TbU9lz+aKTIL2LphCkXPNvzp2/HOg7pUwoehXZUTDPpoaENULshhcBId+dW/m30MapmEr5XODzFzudrnayfpkEe6wJ+xxvojw8zSScuPJiURBF/1Wu08M3ZGpX+umJznCsT1LSQ1lMfBwRjZDthMv4bP0WJykYllmNm0WKm/Sx8n8cehGREO+dIDwGfMzC/9jKeEZ6SFPWjXlZ3OgDOFZ04poTqZUMKdZJoaLCP/dLBDnQoeMXdGT0DwFtcPXYOtvRRatBFao/K+ID3KRGiGr/sUKCadx77sAXd98TwJfYEbrw9iCa3MgYz+vuGp2HQt4tBxSPBB1/zAwY1q3emhJiHGLpsXLI5jxqiU4+R8ozxKsXZNMXEmKitj4udNWavUW0sFOpGD+o/p6vV2tEHVqmvt21O3kpf32z63f0yL5PaOlk2b4EuAT88Su3L3V6ZF/G4Rs/By6jQzhcSH6hSMJCfrYmbVL1Uktry8zNV8r4bcg8L3EBrWIrAJllDzvdd7RzTlOSrsZ7trWZAGjNCzIEYvmwcR9V/OKzd1KxJ9LnyOD4tWGTDAzpZtXMDwv7AfdVU29bqwRw7AJSd5q60G0Aw0E3dXpa+4nyfiPNY00kmY/M89tRlQku0wk9iJt76YSNH8zAfjmgND8qw4QFv7XD3BqPNyIpPf4qiAL2u+AV2bymukA1fsCJGHnzv8+WKmhXqKH2cr+NU/DpieijRnXIFt/8sJ6Wy9SSc=
// ws
// zvf1kAN4NexAH0IGc1N8p6yrcFNC5V7u8DZB4rcQC45F6RSxj5Z1lzqqiCPM/d6uyfxOkh/2ByRHZverntT8elcwRn5cplQG9ZzuciRc5cmJ4p872fPqEp43PTHXuavWgMsuPFfJsQ+rxWTTW3+0KFJqjpa43/YNKlFUfgTCjxjf0v7bUmFkmmY4DY4I+CBRq2KGBHWp0oMZNT4G6wldLa/dRK9TguFNvs3FdTMw//OtTaiGMGBqgfEESWem8xPv6GxGuHv/4VwRXG4TKCs8mZ50txGUHmFagPS45/Wq84o05XzqnwkwBTdSyRfv2s04VvYqyxlDDwdvL3rWmMfxOcSUazh2mfV5Xop34/uBMeQvz3vpyC0A20s3dubrFV4vcRNfbp2jiKMTUAzMBnrJjCT2w4YVBou3BR+ps54QzpHcgx7d8J6QmyJQkVIyNEXtfHj1V9ZOr73fv8yD4sWCerESlw1tVpNDaLAAT4uwd7pMqZAUx51Mq0l0RBDIsNNGIDSTFPK984k4WNGk05ixVg96Y1x274UCJTA2VDsGKNhXMsq+4MS5YKA69bAbAq0l5cmP6yaGncMqF0fB/s0zZw5thI+EzVS65K1hTLsg+WHyDV+Ux6Ns3s/6yT1WvC0dgydg0U2EWSJ8HKeNEPtwcmKp66s1VatdX2XJspzeI3JKUc3GbcvHmzwHwzHKokvwdYEYMy4A0gSfEq0rQrnwCXk96aTCeU+hawHZAVq2BY4VP1LR59iV2NbK/+uD4wVjpZe8fTqN65OKpghdunSYLv5WYb8kOGnMfZUyucDAMvUe2e/Zww8XkP8hnnDnfLEfKUaRqnCPGOiHQwNeL/D1GmI85tGq2eaQzia7k5C3UrJsO33puU4VhbLekPcVaVZ/rUTkmafkp0rJ7iQtvrHtrwJqaIs2XbVZQww2RBsgkALLQmclIxGKGZjcuiULOcro0VHFR8iJQrDaG6i6jxHcUJKFXy74AMFq0639+iNgkDbRqOD9X5MwpsJsaWxoXKqKSTdiWLdtp2DO2CTzUZJXwQG2wsAiet1dxNwD0GcfJ0wOi1A0ZKSeZabJkBY50csldxn7nnhfofGx3fBPmw6tDv6ULuCYg2tccaqFf25Wo27uRJut9c0wpk60RFa3aYTvUDEuxnggW0e7p6lTM4mFEQeo7snDblaeV/zHHnsHZsXnf55AlVoXW2ZOMo4azhDSadcJ7HgmoYuyiA8tkLKwWT+HGaUqWqsaDO2/TfPSDEIth6hqsm7SIxs6Koa27hYI/qFE1mnq2Xt2tQZpOqJwvLzuFlq6xgtOuOXSspMiUG/xogqK2FZw4bF//bubF6D6Zcc4FJlQke3fHCT31OtlLDc+O7HYrVLLShbAJojlo/Ii3z9y7fEQ14LsKaGBCiPA3xUhZG3tsw2hbmRr1C5Kwr530WwLMmxxI+YMlYZcA97T9usMTgY+vNaZtPwlCRJ1d+NqeDA7lzEoXQf3CNVKyjg1pfsiI+lqvE9Xsavww/49VvU9ONOLbEiVUHRQCirXAVBqwyMNKIQAJROo0q7Mfd9g4/b3OOyy61tnOr+QSocfwJtoa13mQSh5INH8ETAuJ+UMrk3exBw9mYkhriMtdHDeafqvokAU17rJor6ySu8lBEZ5/eKOvx0B71U3+lSvdA6P4KuRNnrB4o+7xqpml3AT03Jn4poRpt7ZIIjVnxslgsaL7uxfryaLzHcBorLp/YWeRetmbgiPIluvb1pfujNmSVh1zY701KIwY5jQ88FWLvcCNHetYBTX7Y9ChCQqI9IwJF5dDl4Nv/wEOHi2dRkO0Y57bBBYE1d56/yyGCoSgkojyNcAjC/qxds8H7NRp4Ws/77ScMm5kYU3m6RNkJ9S+BaKEWPD69hb1obpymP5d2iqwUFzAQ==

